<?php
$isUpgrade = $isUpgrade ?? false;
$lockedDatabase = $lockedDatabase ?? null;
$defaultAppDomain = $defaultAppDomain ?? 'localhost';
$defaultHttpPort = $defaultHttpPort ?? '80';
$defaultHttpsPort = $defaultHttpsPort ?? '443';
$defaultEmailCertificates = $defaultEmailCertificates ?? '';
$defaultSecretKey = $defaultSecretKey ?? '';
$defaultDatabase = $defaultDatabase ?? 'mongodb';
$selectedDatabase = $lockedDatabase ?: $defaultDatabase;
$defaultDatabaseLabel = $selectedDatabase === 'mariadb' ? 'MariaDB' : 'MongoDB';
$badgeLabel = $defaultSecretKey !== '' ? 'Generated' : 'Missing';
$badgeClass = $defaultSecretKey !== '' ? 'badge-success' : 'badge-warning';
?>
<div class="step-layout" data-step="4">
    <div class="stack-xl">
        <div class="stack-xxxs">
            <h1 class="typography-title-s text-neutral-primary"><?php echo $isUpgrade ? 'Review your update' : 'Review your setup'; ?></h1>
            <p class="typography-text-m-400 text-neutral-secondary">
                <?php echo $isUpgrade ? 'Confirm your settings before updating Appwrite.' : 'Check your settings below before completing the installation.'; ?>
            </p>
        </div>

        <div class="stack-xl">
            <div class="review-card">
                <div class="stack-s">
                    <div class="review-row">
                        <div class="typography-text-m-500 text-neutral-primary" data-review-value="appDomain">
                            <?php echo htmlspecialchars((string) $defaultAppDomain, ENT_QUOTES, 'UTF-8'); ?>
                        </div>
                        <div class="review-label typography-text-xs-400 text-neutral-tertiary">Hostname</div>
                    </div>
                    <div class="review-row">
                        <div class="typography-text-m-500 text-neutral-primary" data-review-value="database">
                            <?php echo htmlspecialchars((string) $defaultDatabaseLabel, ENT_QUOTES, 'UTF-8'); ?>
                        </div>
                        <div class="review-label typography-text-xs-400 text-neutral-tertiary">Database</div>
                    </div>
                    <div class="review-row">
                        <div class="typography-text-m-500 text-neutral-primary" data-review-value="httpPort">
                            <?php echo htmlspecialchars((string) $defaultHttpPort, ENT_QUOTES, 'UTF-8'); ?>
                        </div>
                        <div class="review-label typography-text-xs-400 text-neutral-tertiary">HTTP port</div>
                    </div>
                    <div class="review-row">
                        <div class="typography-text-m-500 text-neutral-primary" data-review-value="httpsPort">
                            <?php echo htmlspecialchars((string) $defaultHttpsPort, ENT_QUOTES, 'UTF-8'); ?>
                        </div>
                        <div class="review-label typography-text-xs-400 text-neutral-tertiary">HTTPS port</div>
                    </div>
                    <div class="review-row">
                        <div class="typography-text-m-500 text-neutral-primary" data-review-value="emailCertificates">
                            <?php echo htmlspecialchars((string) $defaultEmailCertificates, ENT_QUOTES, 'UTF-8'); ?>
                        </div>
                        <div class="review-label typography-text-xs-400 text-neutral-tertiary">SSL certificate email</div>
                    </div>
                    <div class="review-row">
                        <span class="badge badge-neutral typography-text-xs-400" data-review-assistant-badge>Disabled</span>
                        <div class="review-label typography-text-xs-400 text-neutral-tertiary">Appwrite Assistant</div>
                    </div>
                    <div class="review-row">
                        <span class="badge <?php echo $badgeClass; ?> typography-text-xs-400" data-review-badge>
                            <?php echo htmlspecialchars((string) $badgeLabel, ENT_QUOTES, 'UTF-8'); ?>
                        </span>
                        <div class="review-label typography-text-xs-400 text-neutral-tertiary">Secret API key</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>
